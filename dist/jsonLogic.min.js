!(function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(r=r||self).jsonLogic=n()})(this,(function(){"use strict";function r(){return(r=Object.assign||function(r){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}return r}).apply(this,arguments)}var n=Array.isArray;function t(r){return"object"==typeof r&&null!==r&&!n(r)&&1===Object.keys(r).length}function e(r){return Object.keys(r)[0]}var u=function(r){return function u(i,o){if(o||(o={}),n(i))return i.map((function(r){return u(r,o)}));if(!t(i))return i;var f=e(i),a=i[f];n(a)||(a=[a]);var c=r[f];if(!c)throw new Error("Unrecognized operation "+f);return c(u,o,a)}};function i(r){return(!n(r)||0!==r.length)&&!!r}function o(r){return r[e(r)]}var f=function(r,n,t){var e=r(t,n),u=e[0],i=e[1];if(null==u||""===u)return n;for(var o=String(u).split("."),f=0;f<o.length;f++){if(!(n=n[o[f]]))break}return null==n&&(n=i),null!=n?n:null},a=function(r,t,e){for(var u=r(e,t),i=[],o=n(u[0])?u[0]:u,a=0;a<o.length;a++){var c=o[a],l=f(r,t,[c]);null!==l&&""!==l||i.push(c)}return i},c=function(r,n,t){var e;for(e=0;e<t.length-1;e+=2)if(i(r(t[e],n)))return r(t[e+1],n);return t.length===e+1?r(t[e],n):null};return r({},(function(r,t){var e={};function i(r,t,u){n(r)?r.forEach((function(r){return i(r,t)})):"function"==typeof t?u||!1===t.deepFirst?e[r]=t:t.withApply?e[r]=function(r,n,e){var u=r(e,n);return t.apply(void 0,[r].concat(u))}:e[r]=function(r,n,e){var u=r(e,n);return t.apply(void 0,u)}:"object"==typeof t&&Object.getOwnPropertyNames(t).forEach((function(n){i(r+"."+n,t[n])}))}return r&&Object.keys(r).forEach((function(n){var e=r[n];i(e.op||n,e,t)})),{apply:u(e),add_operation:i,rm_operation:function r(t){n(t)?t.forEach((function(n){return r(n)})):delete e[t]}}})({"+":function(r,n,t){return r(t,n).reduce((function(r,n){return parseFloat(r)+parseFloat(n)}),0)},all:function(r,n,t){var e=r(t[0],n),u=t[1];if(!e.length)return!1;for(var o=0;o<e.length;o+=1)if(!i(r(u,e[o])))return!1;return!0},and:function(r,n,t){for(var e,u=0;u<t.length;u++)if(!i(e=r(t[u],n)))return e;return e},cat:function(r,n,t){return r(t,n).join("")},"/":function(r,n,t){var e=r(t,n);return e[0]/e[1]},"==":function(r,n,t){var e=r(t,n);return e[0]==e[1]},filter:function(r,t,e){var u=r(e[0],t),o=e[1];return n(u)?u.filter((function(n){return i(r(o,n))})):[]},">":function(r,n,t){var e=r(t,n);return e[0]>e[1]},">=":function(r,n,t){var e=r(t,n);return e[0]>=e[1]},"?:":c,if:c,in:function(r,n,t){var e=r(t,n),u=e[0],i=e[1];return!(!i||void 0===i.indexOf)&&-1!==i.indexOf(u)},"<":function(r,n,t){var e=r(t,n),u=e[0],i=e[1],o=e[2];return void 0===o?u<i:u<i&&i<o},"<=":function(r,n,t){var e=r(t,n),u=e[0],i=e[1],o=e[2];return void 0===o?u<=i:u<=i&&i<=o},log:function(r,n,t){var e=r(t,n)[0];return console.log(e),e},map:function(r,t,e){var u=r(e[0],t),i=e[1];return n(u)?u.map((function(n){return r(i,n)})):[]},max:function(r,n,t){var e=r(t,n);return Math.max.apply(Math,e)},merge:function(r,n,t){return r(t,n).reduce((function(r,n){return r.concat(n)}),[])},method:function(r,n,t){var e=r(t,n),u=e[0],i=e[1],o=e[2];return u[i].apply(u,o)},min:function(r,n,t){var e=r(t,n);return Math.min.apply(Math,e)},missing:a,missing_some:function(r,n,t){var e=r(t,n),u=e[0],i=e[1],o=a(r,n,[i]);return i.length-o.length>=u?[]:o},"%":function(r,n,t){var e=r(t,n);return e[0]%e[1]},"*":function(r,n,t){return r(t,n).reduce((function(r,n){return parseFloat(r)*parseFloat(n)}),1)},none:function(r,n,t){return 0===r({filter:t},n).length},"!":function(r,n,t){return!i(r(t,n)[0])},"!=":function(r,n,t){var e=r(t,n);return e[0]!=e[1]},"!!":function(r,n,t){return i(r(t,n)[0])},or:function(r,n,t){for(var e,u=0;u<t.length;u++)if(i(e=r(t[u],n)))return e;return e},reduce:function(r,t,e){var u=r(e[0],t),i=e[1],o=void 0!==e[2]?e[2]:null;return n(u)?u.reduce((function(n,t){return r(i,{current:t,accumulator:n})}),o):o},some:function(r,n,t){return r({filter:t},n).length>0},"===":function(r,n,t){var e=r(t,n);return e[0]===e[1]},"!==":function(r,n,t){var e=r(t,n);return e[0]!==e[1]},substr:function(r,n,t){var e=r(t,n),u=e[0],i=e[1],o=e[2];if(o<0){var f=String(u).substr(i);return f.substr(0,f.length+o)}return String(u).substr(i,o)},"-":function(r,n,t){var e=r(t,n),u=e[0],i=e[1];return void 0===i?-u:u-i},var:f},!0),{is_logic:t,truthy:i,get_operator:e,get_values:o,uses_data:function r(u){var i=[];if(t(u)){var o=e(u),f=u[o];n(f)||(f=[f]),"var"===o?i.push(f[0]):f.forEach((function(n){i.push.apply(i,r(n))}))}return (function(r){for(var n=[],t=0,e=r.length;t<e;t++)-1===n.indexOf(r[t])&&n.push(r[t]);return n})(i)},rule_like:function r(u,i){if(i===u)return!0;if("@"===i)return!0;if("number"===i)return"number"==typeof u;if("string"===i)return"string"==typeof u;if("array"===i)return n(u)&&!t(u);if(t(i)){if(t(u)){var f=e(i),a=e(u);if("@"===f||f===a)return r(o(u),o(i))}return!1}if(n(i)){if(n(u)){if(i.length!==u.length)return!1;for(var c=0;c<i.length;c+=1)if(!r(u[c],i[c]))return!1;return!0}return!1}return!1}})}));
//# sourceMappingURL=jsonLogic.min.js.map
